<% is_revealed = local_assigns.fetch(:revealed, game.revealed_cells.include?([x, y])) %>
<% is_flagged  = local_assigns.fetch(:flagged,  game.flagged_cells.include?([x, y])) %>
<% count = is_revealed ? game.adjacent_mines(x, y) : 0 %>

<div
  id="cell_<%= x %>_<%= y %>"
  class="cell w-5 h-5 border border-gray-600 flex items-center justify-center cursor-pointer
    <%= 'revealed bg-gray-300 cursor-default' if is_revealed %>
    <%= 'flagged bg-yellow-200' if is_flagged %>"
  data-x="<%= x %>"
  data-y="<%= y %>"
  <%= "data-action=\"click->game#reveal contextmenu->game#flag\"".html_safe unless is_revealed %>
>
  <% if is_revealed && count.positive? %>
    <%= count %>
  <% elsif is_flagged %>
    ðŸš©
  <% end %>
</div>
